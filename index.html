<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Persebaran Taman Kota Samarinda</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <style>
    #mapid { height: 520px; }
    .legend {
      background: white;
      padding: 10px;
      line-height: 1.5;
      border-radius: 6px;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
      font-size: 0.9rem;
    }
    .legend i {
      width: 15px;
      height: 15px;
      float: left;
      margin-right: 8px;
      opacity: 0.8;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Navbar -->
  <nav class="flex justify-between items-center bg-green-700 text-white px-6 py-3 shadow">
    <div class="text-lg font-semibold">Dashboard Persebaran Taman Kota Samarinda</div>
    <div class="md:hidden cursor-pointer text-2xl" onclick="toggleMenu()">&#9776;</div>
    <ul class="menu hidden md:flex space-x-4">
      <li><a href="#peta" class="hover:underline">Peta</a></li>
      <li><a href="#tentang" class="hover:underline">Tentang</a></li>
    </ul>
  </nav>

  <!-- Bagian Peta + Tentang Kami -->
  <section class="container mx-auto my-8 px-4 grid md:grid-cols-2 gap-6">
    
    <!-- Peta -->
    <div class="bg-white shadow rounded p-4">
      <h2 class="text-xl font-semibold mb-3">Peta Persebaran Taman Kota Samarinda</h2>
      <div id="mapid" class="w-full rounded border"></div>
    </div>

    <!-- Tentang Kami + Tujuan -->
    <div class="bg-white shadow rounded p-6">
      <!-- Tentang Kami -->
      <h2 class="text-2xl font-bold text-green-700 mb-3 border-l-4 border-green-500 pl-3">Tentang Kami</h2>
      <p class="text-gray-700 leading-relaxed mb-4">
        Peta ini hadir, untuk pengalaman eksplorasi yang interaktif, informatif, dan menarik di mana pengguna dapat melihat langsung sebaran taman, memahami distribusinya per kecamatan, serta mengenali pentingnya keberadaan ruang hijau dalam mendukung kualitas lingkungan perkotaan.
        Pembuatan peta ini dilakukan menggunakan QGIS untuk pengolahan data spasial dan Leaflet.js untuk menampilkan hasilnya dalam bentuk web interaktif.
        Kami percaya bahwa teknologi geospasial dapat menjadi sarana penting untuk transparansi data lingkungan dan mendukung pengambilan keputusan berbasis lokasi di tingkat kota.
      </p>

      <!-- Tujuan -->
      <h2 class="text-2xl font-bold text-green-700 mb-3 border-l-4 border-green-500 pl-3">Tujuan</h2>
      <ul class="list-disc ml-5 text-gray-700 leading-relaxed mb-6">
        <li>Mengetahui persebaran taman dan ruang terbuka hijau di Kota Samarinda..</li>
        <li>Menyediakan data spasial yang dapat digunakan untuk perencanaan tata ruang kota.</li>
        <li>Membantu pemerintah dalam evaluasi dan pengembangan kebijakan lingkungan perkotaan.</li>
      </ul>
    </div>
  </section>

  <!-- Latar Belakang -->
  <section class="container mx-auto px-4 mb-8">
    <div class="bg-white shadow rounded p-6">
      <h2 class="text-2xl font-bold text-green-700 mb-3 border-l-4 border-green-500 pl-3">Latar Belakang</h2>
      <p class="text-gray-700 leading-relaxed">
        Kota Samarinda sebagai ibu kota Provinsi Kalimantan Timur memiliki tantangan besar dalam menjaga keseimbangan 
        antara pembangunan dan kelestarian lingkungan. Ruang Terbuka Hijau (RTH) menjadi bagian penting untuk menjaga 
        kualitas udara, keseimbangan ekosistem, dan meningkatkan kualitas hidup masyarakat. 
        Melalui dashboard ini, persebaran taman kota dapat diakses secara visual dan interaktif untuk membantu 
        analisis perencanaan wilayah serta evaluasi ketersediaan ruang hijau publik.
      </p>
    </div>
  </section>

  <!-- Statistik Umum -->
  <section class="container mx-auto px-4 mb-10">
    <div class="bg-green-50 rounded-lg p-6 shadow-inner text-center">
      <h3 class="font-semibold mb-3 text-green-700 text-2xl">üìä Statistik Umum</h3>
      <div class="flex flex-col md:flex-row justify-center gap-8 text-gray-700">
        <div>üå≥ Jumlah Taman: <b id="totalTaman">0</b></div>
        <div>üìè Luas Total (perkiraan): <b>52.4 ha</b></div>
        <div>üèôÔ∏è Kecamatan Terbanyak: <b>Samarinda Ulu</b></div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center text-gray-500 py-4 border-t bg-white">
    ¬© 2025 Peta Taman Kota Samarinda ¬∑ By: Nova Nur Fauziah
  </footer>

  <!-- File data hasil QGIS -->
  <script src="data/ADMINISTRASIKECAMATAN_AR_50K_2.js"></script>
  <script src="data/buffered_samarinda_1.js"></script>
  <script src="data/disolvefix_samarinda_3.js"></script>
  <script src="data/Taman_di_samarinda_4.js"></script>
  <script src="data/Taman_samarinda_clip_5.js"></script>

  <script>
    var map = L.map('mapid').setView([-0.502106, 117.153709], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Fungsi interaktif
    function onEachFeatureInteraktif(feature, layer) {
      layer.on({
        mouseover: function (e) {
          e.target.setStyle({ weight: 3, color: "#000", fillOpacity: 0.5 });
          e.target.bringToFront();
        },
        mouseout: function (e) { layer.resetStyle(e.target); },
        click: function (e) {
          e.target.setStyle({ color: "#ff0000", weight: 4, fillOpacity: 0.6 });
          if (feature.properties) {
            let info = '';
            for (const key in feature.properties) {
              info += `<b>${key}</b>: ${feature.properties[key]}<br>`;
            }
            L.popup().setLatLng(e.latlng).setContent(info).openOn(map);
          }
        }
      });
    }

    // Layer data
    var layer_ADMINISTRASI = L.geoJson(json_ADMINISTRASIKECAMATAN_AR_50K_2, {
      style: { color: "#e63946", weight: 1.2, fillColor: "#ffb3b3", fillOpacity: 0.15 },
      onEachFeature: onEachFeatureInteraktif
    }).addTo(map);

    var layer_BUFFER = L.geoJson(json_buffered_samarinda_1, {
      style: { color: "#1d3557", weight: 1.5, fillColor: "#a8dadc", fillOpacity: 0.2 },
      onEachFeature: onEachFeatureInteraktif
    }).addTo(map);

    var layer_DISOLVE = L.geoJson(json_disolvefix_samarinda_3, {
      style: { color: "#8338ec", weight: 1, fillColor: "#c19ee0", fillOpacity: 0.25 },
      onEachFeature: onEachFeatureInteraktif
    }).addTo(map);

    var layer_TAMAN = L.geoJson(json_Taman_di_samarinda_4, {
      pointToLayer: function (feature, latlng) {
        return L.circleMarker(latlng, {
          radius: 6,
          fillColor: "#2d6a4f",
          color: "#1b4332",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.9
        });
      },
      onEachFeature: function (feature, layer) {
        layer.on({
          mouseover: function () { layer.setStyle({ fillColor: "#52b788" }); },
          mouseout: function () { layer.setStyle({ fillColor: "#2d6a4f" }); },
          click: function (e) {
            L.popup()
              .setLatLng(e.latlng)
              .setContent(`<b>${feature.properties.Nama}</b><br>Kecamatan: ${feature.properties.Kecamatan || '-'}`)
              .openOn(map);
          }
        });
      }
    }).addTo(map);

    var layer_CLIP = L.geoJson(json_Taman_samarinda_clip_5, {
      style: { color: "#ff8800", weight: 1.5, fillColor: "#ffd166", fillOpacity: 0.3 },
      onEachFeature: onEachFeatureInteraktif
    }).addTo(map);

    // Kontrol layer
    L.control.layers(null, {
      "Batas Kecamatan": layer_ADMINISTRASI,
      "Buffer Area": layer_BUFFER,
      "Dissolve Area": layer_DISOLVE,
      "Taman Kota": layer_TAMAN,
      "Clip Area": layer_CLIP
    }).addTo(map);

    // Statistik
    const taman = json_Taman_di_samarinda_4.features;
    document.getElementById('totalTaman').textContent = taman.length;

    // Legenda
    var legend = L.control({ position: 'bottomright' });
    legend.onAdd = function () {
      var div = L.DomUtil.create('div', 'legend');
      div.innerHTML = `
        <h4><b>üó∫Ô∏è Legenda</b></h4>
        <i style="background:#e63946"></i> Batas Kecamatan<br>
        <i style="background:#1d3557"></i> Buffer Area<br>
        <i style="background:#8338ec"></i> Dissolve Area<br>
        <i style="background:#2d6a4f"></i> Taman Kota<br>
        <i style="background:#ff8800"></i> Clip Area
      `;
      return div;
    };
    legend.addTo(map);

    function toggleMenu() {
      document.querySelector('.menu').classList.toggle('hidden');
    }
  </script>
</body>
</html>
